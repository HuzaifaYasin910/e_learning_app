
{% extends 'navs-studs.html' %} {% block navs %}
<div id="customAlert" class="custom-alert"><span class="alert-message"></span><button class="close-alert" onclick="closeCustomAlert()">&times;</button></div><div class="container-fluid my-5"><div class="container"><h3 class="text-dark mb-4 fw-bold fs-1 Alatsi">{{category_name}}</h3><div><div class="row">{% if courses %} {% for course in courses %} <div class="col-md-3 py-3"><div class="card"><img class="card-img-top w-100 d-block" src="{{course.image.url}}"><div class="card-body"><div class="d-flex"><div class="w-50"><p class="m-0">Students:{{course.students}}</p></div><div class="d-sm-flex d-xxl-flex justify-content-sm-end justify-content-xxl-end w-50"><p class="m-0">{{course.created_at}}</p></div></div><a href="{% url 'students:course_detail' course.id %}"><h4 class="fc-dark-l fs-3 Alatsi">{{course.title}}</h4></a><div class="d-flex"><div class="w-50"><a href="{% url 'students:author' course.author.id %}"><p class="m-0">{{course.author}}</p></a></div><div class="d-sm-flex d-xxl-flex justify-content-sm-end justify-content-xxl-end w-50">{% if course in request.user.student.courses_liked_set.all %} <a class="courses_liked" href="#" id="{{course.id}}" style="color : text-success"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" fill="none" class="fs-4"><path d="M5 4C5 2.89543 5.89543 2 7 2H13C14.1046 2 15 2.89543 15 4V18L10 15.5L5 18V4Z" fill="currentColor"></path></svg></a>{% else %} <a class="courses_liked" href="#" id="{{course.id}}"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20 20" fill="none" class="fs-4"><path d="M5 4C5 2.89543 5.89543 2 7 2H13C14.1046 2 15 2.89543 15 4V18L10 15.5L5 18V4Z" fill="currentColor"></path></svg></a>{% endif %} </div></div></div></div></div>{% endfor %} {% else %} <h3 class="fw-bold my-5">No courses for this category</h3>{% endif %} </div></div></div><script>$(".courses_liked").click(function(event){ console.log("Card link clicked"); event.preventDefault(); var course_id=$(this).attr("id"); var url="{% url 'students:courses_liked' 0 %}".replace('0', course_id); $.ajax({ type: "POST", url: url, data:{ csrfmiddlewaretoken: "{{csrf_token}}"}, success: function (data){ if (data.course_added){ showCustomAlert("Course added!")} else{ showCustomAlert("Course removed!")}}, error: function (xhr, textStatus, errorThrown){ console.log(xhr); console.log(textStatus); console.log(errorThrown); alert("Module Completed - Error")},})}); function showCustomAlert(message){ var customAlert=document.getElementById("customAlert"); var alertMessage=customAlert.querySelector(".alert-message"); alertMessage.textContent=message; customAlert.style.display="block"} function closeCustomAlert(){ document.getElementById("customAlert").style.display="none"} </script>{% endblock %}